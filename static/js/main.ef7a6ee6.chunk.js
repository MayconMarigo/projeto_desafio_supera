(this.webpackJsonpdesafio_supera=this.webpackJsonpdesafio_supera||[]).push([[0],{2:function(e){e.exports=JSON.parse('[{"id":312,"name":"Super Mario Odyssey","price":197.88,"score":100,"image":"assets/super-mario-odyssey.png"},{"id":201,"name":"Call Of Duty Infinite Warfare","price":49.99,"score":80,"image":"assets/call-of-duty-infinite-warfare.png"},{"id":102,"name":"The Witcher III Wild Hunt","price":119.5,"score":250,"image":"assets/the-witcher-iii-wild-hunt.png"},{"id":99,"name":"Call Of Duty WWII","price":249.99,"score":205,"image":"assets/call-of-duty-wwii.png"},{"id":12,"name":"Mortal Kombat XL","price":69.99,"score":150,"image":"assets/mortal-kombat-xl.png"},{"id":74,"name":"Shards of Darkness","price":71.94,"score":400,"image":"assets/shards-of-darkness.png"},{"id":31,"name":"Terra M\xe9dia: Sombras de Mordor","price":79.99,"score":50,"image":"assets/terra-media-sombras-de-mordor.png"},{"id":420,"name":"FIFA 18","price":195.39,"score":325,"image":"assets/fifa-18.png"},{"id":501,"name":"Horizon Zero Dawn","price":115.8,"score":290,"image":"assets/horizon-zero-dawn.png"}]')},22:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var a=r(1),o=r.n(a),n=r(6),i=r.n(n),s=r(9),c=r(13),d=r(14),l=r(4),u=r(17),h=r(16),j=(r(22),r(2)),p=r(3),m=r.n(p),b=r.p+"static/media/cart-icon.f62597cd.svg",O=r(15),g=(r(24),r(0)),f=function(e){Object(u.a)(r,e);var t=Object(h.a)(r);function r(e){var a;return Object(c.a)(this,r),(a=t.call(this,e)).openCart=function(e){a.setState({openModal:!0});for(var t=a.state.carrinho,r=0,o=0,n=0;n<t.length;n++)r+=Object.values(t)[n].preco,o+=10;r>250?a.setState({subtotal:r,frete:0,total:r}):a.setState({subtotal:r,frete:o,total:o+r})},a.onCloseModal=function(){a.setState({openModal:!1})},a.state={prod:[j],carrinho:[],total:0,subtotal:0,frete:0,openModal:!1,counter:0},a.handleSelectChange=a.handleSelectChange.bind(Object(l.a)(a)),a.submitFunction=a.submitFunction.bind(Object(l.a)(a)),a.removeFromCart=a.removeFromCart.bind(Object(l.a)(a)),a}return Object(d.a)(r,[{key:"removeFromCart",value:function(e){var t=this,r=parseInt(e.target.value),a=this.state.carrinho;m()({text:"Tem certeza que deseja remover do carrinho ?",buttons:["Manter","Remover"],dangerMode:!0}).then((function(e){if(e){for(var o=0;o<a.length;o++)Object.values(a)[o].id==r&&a.splice(a.indexOf(r),1);t.openCart();var n=t.state.counter;t.setState({counter:n-1})}else m()("Seu carrinho est\xe1 seguro!")}))}},{key:"orderByName",value:function(){j.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))}},{key:"orderByScore",value:function(){j.sort((function(e,t){return e.score<t.score?1:e.score>t.score?-1:0}))}},{key:"orderByMinorPrice",value:function(){j.sort((function(e,t){return e.price<t.price?-1:e.price>t.price?1:0}))}},{key:"orderByMajorPrice",value:function(){j.sort((function(e,t){return e.price>t.price?-1:e.price<t.price?1:0}))}},{key:"submitFunction",value:function(e){var t=this,r=this.state.carrinho;e.preventDefault();for(var a=this.state.counter,o=0;o<r.length;o++)if(r[o].nome==e.target.childNodes[1].innerText)return void m()({title:"J\xe1 existe um produto igual no carrinho",text:"O produto ".concat(e.target.childNodes[1].innerText," j\xe1 foi adicionado ao carrinho, deseja adicionar mais uma unidade?"),buttons:["Cancelar","Adicionar ao carrinho"],dangerMode:!1}).then((function(r){if(r)return t.setState({carrinho:[].concat(Object(s.a)(t.state.carrinho),[{nome:e.target.childNodes[1].innerText,preco:parseFloat(e.target.childNodes[3].attributes[2].nodeValue),id:parseFloat(e.target.childNodes[3].attributes[3].nodeValue)}])}),m()("Produto adicionado com sucesso, boas compras!"),void t.setState({counter:a+1});m()("Produto n\xe3o adicionado!")}));m()("Produto ".concat(e.target.childNodes[1].innerText," foi adicionado ao carrinho com sucesso, boas compras!")),this.setState({counter:a+1}),this.setState({carrinho:[].concat(Object(s.a)(this.state.carrinho),[{nome:e.target.childNodes[1].innerText,preco:parseFloat(e.target.childNodes[3].attributes[2].nodeValue),id:parseFloat(e.target.childNodes[3].attributes[3].nodeValue)}])})}},{key:"handleSelectChange",value:function(e){switch(e.target.value){case"name":this.setState({prod:this.orderByName(e)});break;case"price-major":this.setState({prod:this.orderByMajorPrice(e)});break;case"price-minor":this.setState({prod:this.orderByMinorPrice(e)});break;case"score":this.setState({prod:this.orderByScore(e)})}}},{key:"render",value:function(){var e=this,t=this.state,r=t.carrinho,a=t.counter,o=t.total,n=t.subtotal,i=t.frete;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("header",{children:[Object(g.jsxs)("div",{className:"toggle",onClick:this.openCart,children:[Object(g.jsx)("img",{src:b}),Object(g.jsxs)("span",{children:["Seu carrinho: ",a," ",a&&a>1?"Itens":"Item"," "]})]}),Object(g.jsxs)(O.a,{open:this.state.openModal,onClose:this.onCloseModal,"data-testid":"modal",children:[Object(g.jsx)("p",{children:Object(g.jsx)("strong",{children:Object(g.jsx)("u",{children:"Seu Carrinho:"})})}),r.map((function(t){return Object(g.jsxs)("div",{className:"carrinho-card",children:[Object(g.jsx)("strong",{children:t.nome}),Object(g.jsx)("br",{}),Object(g.jsxs)("span",{children:["R$: ",t.preco.toFixed(2,0)]}),Object(g.jsx)("br",{}),Object(g.jsx)("button",{value:t.id,onClick:e.removeFromCart,children:"Remover item"})]},t.id)})),Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Subtotal: R$ "}),n.toFixed(2)]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Frete: R$ "}),i]}),Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Total: R$ "}),o.toFixed(2)]})]})]}),Object(g.jsx)("div",{className:"select",children:Object(g.jsxs)("select",{onChange:this.handleSelectChange,children:[Object(g.jsx)("option",{children:"Ordenar por..."}),Object(g.jsx)("option",{value:"name",children:"Ordem alfab\xe9tica"}),Object(g.jsx)("option",{value:"price-minor",children:"Menor pre\xe7o "}),Object(g.jsx)("option",{value:"price-major",children:"Maior Pre\xe7o"}),Object(g.jsx)("option",{value:"score",children:"Mais relevantes"})]})}),Object(g.jsx)("div",{className:"container",children:j.map((function(t){return Object(g.jsx)("div",{className:"card","data-testid":"card",children:Object(g.jsxs)("form",{onSubmit:e.submitFunction,children:[Object(g.jsx)("img",{src:t.image,alt:t.img}),Object(g.jsx)("h4",{children:Object(g.jsx)("u",{children:t.name})}),Object(g.jsxs)("p",{children:[Object(g.jsx)("strong",{children:"Popularidade :"})," ",t.score]}),Object(g.jsx)("input",{type:"submit",className:"buy",value:"Adicionar por R$ ".concat(t.price.toFixed(2,0)),val:t.price,val1:t.id})]})},t.id)}))})]})}}]),r}(a.Component);var x=function(){return Object(g.jsx)(f,{})};i.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.ef7a6ee6.chunk.js.map